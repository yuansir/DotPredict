# 序列预测功能说明

## 功能概述

序列预测功能允许系统基于历史数据预测下一个小球的颜色。通过分析历史数据中相同序列模式出现后的结果，系统可以预测当前序列最可能出现的下一个颜色。

## 核心概念

1. **序列长度**：用户可配置的一个参数，决定系统在进行预测时要考虑的连续小球数量。
2. **当前序列**：矩阵中最近输入的 N-1 个小球（N 为序列长度）。
3. **历史匹配**：在历史数据中寻找与当前序列相同的模式。
4. **预测结果**：基于历史匹配后的统计概率，预测下一个最可能出现的颜色。

## 示例说明

假设用户设置序列长度为 5，我们来看一个具体的例子：

### 当前输入序列
```
红 -> 黑 -> 红 -> 黑 (等待预测第5个小球)
```

### 历史数据中的匹配序列
```
序列1: 红 -> 黑 -> 红 -> 黑 -> 红
序列2: 红 -> 黑 -> 红 -> 黑 -> 黑
序列3: 红 -> 黑 -> 红 -> 黑 -> 红
序列4: 红 -> 黑 -> 红 -> 黑 -> 黑
序列5: 红 -> 黑 -> 红 -> 黑 -> 黑
```

### 统计分析
- 在历史数据中，找到 5 个匹配的序列
- 在这些序列中，第 5 个位置上：
  - 红球出现 2 次
  - 黑球出现 3 次

### 预测结果
- 由于黑球出现的频率更高（3/5 = 60%），系统会预测下一个小球为黑色
- 预测的置信度为 60%

## 预测流程

1. **序列识别**
   - 获取当前矩阵中最后 N-1 个输入的小球序列
   - N 为用户设置的序列长度

2. **历史搜索**
   - 在所有历史数据中搜索相同的序列模式
   - 不区分日期，所有历史数据都会被考虑

3. **统计分析**
   - 统计匹配序列后一个位置的颜色分布
   - 计算每种颜色出现的频率

4. **预测输出**
   - 选择出现频率最高的颜色作为预测结果
   - 将出现频率作为预测的置信度

## 注意事项

1. 如果历史数据中没有找到匹配的序列，系统将无法做出预测
2. 序列长度的设置会影响预测的准确性：
   - 序列太短可能导致匹配过于宽泛
   - 序列太长可能导致找不到足够的匹配样本
3. 预测结果仅基于历史统计，不考虑其他因素
4. 系统会持续学习新的输入数据，预测准确度可能会随时间提升
